var __spreadArray=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||((n=n||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};function isEmailValid(e){return e.includes("@")}function isUrlValid(e){return e.includes("http")}window.findParent=function(e,t,r){do{if(t(e))return e;if(r&&e==r)return!1}while(e=e.parentNode);return!1};var _a,_b,imgZoom=function(){function e(){var e=this;this.currentIndex=0,this.images=[],this.getZoomImages(),window.addEventListener("resize",function(){document.querySelector(".overlay")&&loadImage(e.images[e.currentIndex])})}return e.prototype.getZoomImages=function(){var r=this,n=document.querySelectorAll('[data-action="imageZoomIn"]');this.images=__spreadArray([],n,!0).map(function(e){return e.getAttribute("href")}),n.forEach(function(t){t.addEventListener("click",function(e){e.preventDefault();e=t.getAttribute("href");r.showOverlay(e,n)})})},e.prototype.renderNav=function(){var e,t="".concat(this.currentIndex+1,"/").concat(this.images.length);null!=(e=document.querySelector(".image--nav"))&&(e.innerHTML=t)},e.prototype.prevImage=function(){0!==this.currentIndex&&(this.currentIndex=this.currentIndex-1,this.loadImage(this.images[this.currentIndex]),this.renderNav())},e.prototype.nextImage=function(){this.currentIndex!==this.images.length-1&&(this.currentIndex=this.currentIndex+1,this.loadImage(this.images[this.currentIndex]),this.renderNav())},e.prototype.showOverlay=function(e){var t=this,r=this.images.indexOf(e),r=(this.currentIndex=r,'<div class="image--nav">'.concat(r+1,"/").concat(this.images.length,"</div>")),r='<div class="overlay"><button class="zoomImgClose"><svg width="25" height="25" viewBox="0 0 25 25" xmlns="http://www.w3.org/2000/svg" class="q"><path d="M18.13 6.11l-5.61 5.61-5.6-5.61-.81.8 5.61 5.61-5.61 5.61.8.8 5.61-5.6 5.61 5.6.8-.8-5.6-5.6 5.6-5.62"/></svg></button><div class="overlay-img-wrap"><img class="overlay-image"><div class="lds-ripple"></div></div>'.concat(r,'<button title="Prev" type="button" class="mfp-arrow mfp-arrow-left mfp-prevent-close"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" aria-hidden="true">\n            <path d="M14.4998 7.80903C14.4742 7.74825 14.4372 7.69292 14.3908 7.64603L8.68084 1.93803C8.58696 1.84427 8.45967 1.79165 8.32699 1.79175C8.19431 1.79184 8.0671 1.84464 7.97334 1.93853C7.87959 2.03241 7.82697 2.1597 7.82707 2.29238C7.82716 2.42506 7.87996 2.55227 7.97384 2.64603L12.8278 7.50003H1.96484C1.83224 7.50003 1.70506 7.5527 1.61129 7.64647C1.51752 7.74024 1.46484 7.86742 1.46484 8.00003C1.46484 8.13263 1.51752 8.25981 1.61129 8.35358C1.70506 8.44735 1.83224 8.50003 1.96484 8.50003H12.8278L7.97384 13.354C7.87996 13.4478 7.82716 13.575 7.82707 13.7077C7.82697 13.8404 7.87959 13.9676 7.97334 14.0615C8.0671 14.1554 8.19431 14.2082 8.32699 14.2083C8.45967 14.2084 8.58696 14.1558 8.68084 14.062L14.3878 8.35403C14.4342 8.30713 14.4712 8.2518 14.4968 8.19103C14.5478 8.069 14.5489 7.93184 14.4998 7.80903Z"></path>\n        </svg></button><button title="Next (Right arrow key)" type="button" class="mfp-arrow mfp-arrow-right mfp-prevent-close"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" aria-hidden="true">\n            <path d="M14.4998 7.80903C14.4742 7.74825 14.4372 7.69292 14.3908 7.64603L8.68084 1.93803C8.58696 1.84427 8.45967 1.79165 8.32699 1.79175C8.19431 1.79184 8.0671 1.84464 7.97334 1.93853C7.87959 2.03241 7.82697 2.1597 7.82707 2.29238C7.82716 2.42506 7.87996 2.55227 7.97384 2.64603L12.8278 7.50003H1.96484C1.83224 7.50003 1.70506 7.5527 1.61129 7.64647C1.51752 7.74024 1.46484 7.86742 1.46484 8.00003C1.46484 8.13263 1.51752 8.25981 1.61129 8.35358C1.70506 8.44735 1.83224 8.50003 1.96484 8.50003H12.8278L7.97384 13.354C7.87996 13.4478 7.82716 13.575 7.82707 13.7077C7.82697 13.8404 7.87959 13.9676 7.97334 14.0615C8.0671 14.1554 8.19431 14.2082 8.32699 14.2083C8.45967 14.2084 8.58696 14.1558 8.68084 14.062L14.3878 8.35403C14.4342 8.30713 14.4712 8.2518 14.4968 8.19103C14.5478 8.069 14.5489 7.93184 14.4998 7.80903Z"></path>\n        </svg></button></div>');document.querySelector("body").insertAdjacentHTML("beforeend",r),document.querySelector("body").classList.add("u-overflowYHidden"),this.loadImage(e),console.log(t.currentIndex),null!=(r=document.querySelector(".zoomImgClose"))&&r.addEventListener("click",t.overlayRemove),null!=(e=document.querySelector(".mfp-arrow-right"))&&e.addEventListener("click",function(){t.nextImage()}),null!=(r=document.querySelector(".mfp-arrow-left"))&&r.addEventListener("click",function(){t.prevImage()})},e.prototype.loadImage=function(o){var i=new Image;document.querySelector(".lds-ripple").style.display="inline-block",i.onload=function(){var e=i.width,t=i.height,r=window.innerHeight-140,n=window.innerWidth-80,r=(n<e?(t*=n/e,e=n,r<t&&(e*=r/t,t=r)):r<t&&(e*=r/t,t=r,n<e)&&(t*=n/e,e=n),document.querySelector(".overlay-image"));r.setAttribute("src",o),r.style.width=e+"px",r.style.height=t+"px",document.querySelector(".overlay-img-wrap").classList.add("is-finieshed"),document.querySelector(".lds-ripple").style.display="none"},i.src=o},e.prototype.overlayRemove=function(){_remove(document.querySelector(".overlay")),document.querySelector("body").classList.remove("is-zoomActive"),document.querySelector("body").classList.remove("u-overflowYHidden")},e}();function _remove(e){var t=e.parentNode;t&&t.removeChild(e)}function overlayRemove(){_remove(document.querySelector(".overlay")),document.querySelector("body").classList.remove("is-zoomActive"),document.querySelector("body").classList.remove("u-overflowYHidden")}function loadImage(o){var i=new Image;i.onload=function(){var e=i.width,t=i.height,r=window.innerHeight-140,n=window.innerWidth-80,r=(n<e?(t*=n/e,e=n,r<t&&(e*=r/t,t=r)):r<t&&(e*=r/t,t=r,n<e)&&(t*=n/e,e=n),document.querySelector(".overlay-image"));r.setAttribute("src",o),r.style.width=e+"px",r.style.height=t+"px",document.querySelector(".overlay-img-wrap").classList.add("is-finieshed")},i.src=o}new imgZoom,document.querySelectorAll(".leftpanel li").forEach(function(t,r){t.addEventListener("click",function(e){document.querySelectorAll(".leftpanel li").forEach(function(e){e.classList.remove("active")}),t.classList.add("active"),document.querySelectorAll(".div-tab").forEach(function(e){e.classList.add("hidden")}),document.querySelectorAll(".div-tab")[r].classList.remove("hidden")})}),null!=(_a=document.querySelector("#upload-categoryCover"))&&_a.addEventListener("click",function(e){e.preventDefault();var r=wp.media({title:obvInit.upload_title,multiple:!1,button:{text:obvInit.upload_button}}).open().on("select",function(){var e,t=r.state().get("selection").first().toJSON().url;null!=(e=document.querySelector("#_category_cover"))&&e.setAttribute("value",t)})}),null!=(_b=document.querySelector("#pure-save"))&&_b.addEventListener("click",function(e){e.preventDefault();e=document.querySelector("#pure-form"),e=new FormData(e),e=new URLSearchParams(e);jQuery.ajax({url:obvInit.ajaxurl,data:e+"&action=farallon_setting",type:"POST",success:function(){var e='<div id="farallon-settings_updated" class="notice notice-success settings-error is-dismissible"><p><strong>'.concat(obvInit.success_message,'</strong></p><button type="button" class="notice-dismiss"></button></div>');jQuery(".pure-wrap").before(e),window.scrollTo(0,0)}})}),function(r){r(document).on("click","#farallon-settings_updated .notice-dismiss",function(){r("#farallon-settings_updated").remove()}),r(".pure-setting-switch").click(function(){var e=r(this),t=r("#"+e.attr("data-id"));e.hasClass("active")?(e.removeClass("active"),t.val(0)):(e.addClass("active"),t.val(1)),t.change()})}(jQuery);